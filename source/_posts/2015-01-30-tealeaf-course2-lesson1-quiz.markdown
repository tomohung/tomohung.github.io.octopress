---
layout: post
title: "Tealeaf_Course2_Lesson1_Quiz"
date: 2015-01-30 08:13:42 +0000
comments: true
categories: [rails, tealeaf]
---

Answer these quizzes, then updated after watching solution.

1. Why do they call it a relational database?

Relational database can store the relationship between data and data. For example, a table store customer's info, and a table store consuming record, these two table can be associated with another table, to establish the customer's consuming history. There are relationships between data and data in relational database. ex. sqlite, MySQL, PostgreSQL ect.

2. What is SQL?

SQL(Structured Query Language), it's domain specific language to manipulate database.

3. There are two predominant views into a relational database. What are they, and how are they different?

There are two associations concepts in relational database:

  - 1:M
  **One to Many** makes target object can associate with many other objects, like one customer can have many consuming records, we can track the customer's consuming history with this association or we can track the record is generated by which customer.

  - M:M
  **Many to Many** makes target objects can associate with many other objects, like posts can be assign to many categories, and category can assign to many poasts. We also can track target post or target category is assigned to which one.

4. In a table, what do we call the column that serves as the main identifier for a row of data? We're looking for the general database term, not the column name.

Attributes. Column indicate that what the row values mean.

5. What is a foreign key, and how is it used?

Every row data in a table is included a **primary key**. If we want to associated with other table, we need this primary key to store which row data we wanna to be connected with this one. The store primary key value's column is called **foreign key**.

6. At a high level, describe the ActiveRecord pattern. This has nothing to do with Rails, but the actual pattern that ActiveRecord uses to perform its ORM duties.

ActiveRecord is mapping the data operation in tables. It substitutes SQL operation and using migration files to define & operate table column.

7. If there's an ActiveRecord model called "CrazyMonkey", what should the table name be?

If I'm confused with this, I can use `rails console` mode, to run

```
"CrazyMonkey".tableize
```
and the answer should be `crazy_monkeys`.


8. If I'm building a 1:M association between Project and Issue, what will the model associations and foreign key be?

in model files
```
class Project ActiveRecord::Base
  has_many :issues
end

class Issue ActiveRecord::Base
  belongs_to :project
end
```

in migration files
```rails
class CreateIssue ActiveRecord:Migration
  def change
    create_table :issues do |t|
      t.integer :project_id
    end
  end
```

9. Given this code

```
class Zoo < ActiveRecord::Base
  has_many :animals
end
```

  - What do you expect the other model to be and what does database schema look like?
  There should be antoher class named "Animal", and it belongs to Zoo. Animal should at least have name, and a foriegn key to set to zoo id.

  - What are the methods that are now available to a zoo to call related to animals?
  ```zoo.animals```
  
  - How do I create an animal called "jumpster" in a zoo called "San Diego Zoo"?
  If in `rails console` mode:
  
  ```
  $ zoo = Zoo.create(name: "San Diego Zoo")
  $ animal = Animal.create(name: "jumpster")
  $ zoo.animals << animal  
  ```

10. What is mass assignment? What's the non-mass assignment way of setting values?

With mass assignment, we can do
`assumption fields: title, body`
```
@post = Post.new(params[:post])
```

without mass assignment, we need to do this
```
@post = Post.new
post.title = "post title"
post.body = "post body"
```

11. What does this code do? `Animal.first`

Query the first data in table `Animal`.

12. If I have a table called "animals" with columns called "name", and a model called `Animal`, how do I instantiate an animal object with name set to "Joe". Which methods makes sure it saves to the database?

This will make sure it saves to database
```
Animal.create(name: "Joe")
```

And this will work too
```
animal = Animal.new(name: "Joe")
animal.save
```

13. How does a M:M association work at the database level?

There is a join table between two relational tables, and it needs these two tables row data primary key to be its foreign key. For example, there is a join table called post_categories, and it stores two foriegn key named: post_id and category_id.

14. What are the two ways to support a M:M association at the ActiveRecord model level? Pros and cons of each approach?

  - has_and_belongs_to_many
  Chris metioned that this method is deprecated. If you don't need to operate the join table, this method is easy to set up association between two tables. And it's doing a more implicit way.

  - has_many through:
  You have to define has_many relation with join table, also define has_many through: realtion to both target table and join table. This explicit the way to connect target table and join table. It's much easier to understand all realtionship between tables.

15. Suppose we have a User model and a Group model, and we have a M:M association all set up. How do we associate the two?

```
user.groups
group.users
```